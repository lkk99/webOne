import{P as C}from"./Pagination-BcaZHcJo.js";import{_ as P,r as a,o as U,f as r,b as u,c as _,g as n,w as s,D,G as L,q as m,F as S,j as z,h as B}from"./index-C7dgg-A2.js";const E={__name:"index",setup(N){const d=a([]),b=a(0),c=a([]),g=e=>{c.value=[]},p=a(1),i=a(50),h=(e,l)=>{p.value=e,i.value=l},v=a([{label:"用户名",prop:"name",width:100},{label:"用户工号",prop:"userCode",width:150,tooltip:!0},{label:"邮箱",prop:"emails",width:150,tooltip:!0},{label:"联系方式",prop:"phone",width:150,tooltip:!0},{label:"性别",prop:"sex",width:150,tooltip:!0},{label:"创建时间",prop:"createTime",width:180}]),f=async()=>{let e=await D({pageNum:p.value,pageSize:i.value,name:""});e.code===200&&(d.value=e.users,b.value=e.total)},w=async()=>{let e=await L();if(e){const l=new Blob([e]),t=document.createElement("a");t.href=URL.createObjectURL(l),t.download="exported_data.xlsx",t.style.display="none",document.body.appendChild(t),t.click(),t.remove()}};return U(()=>{f()}),(e,l)=>{const t=r("el-button"),x=r("el-upload"),y=r("el-table-column"),k=r("el-table");return u(),_("div",null,[n(t,{style:{background:"#680ff7c2",color:"#fff",border:"none"},onClick:w},{default:s(()=>[m(" 导出 ")]),_:1}),n(x,{"file-list":c.value,"onUpdate:fileList":l[0]||(l[0]=o=>c.value=o),action:"/py/importUser",style:{display:"inline-block","margin-left":"20px"},"on-success":g},{default:s(()=>[n(t,{style:{background:"#680ff7c2",color:"#fff",border:"none"}},{default:s(()=>[m(" 导入 ")]),_:1})]),_:1},8,["file-list"]),n(k,{border:"",stripe:"","header-cell-style":{backgroundColor:"rgb(250, 250, 250)"},"cell-style":{height:"48px"},style:{height:"calc(100vh - 150px)","margin-top":"10px"},data:d.value},{default:s(()=>[(u(!0),_(S,null,z(v.value,o=>(u(),B(y,{key:o.prop,"min-width":o.width,prop:o.prop,label:o.label,align:"center","show-overflow-tooltip":o.tooltip},null,8,["min-width","prop","label","show-overflow-tooltip"]))),128))]),_:1},8,["header-cell-style","data"]),n(C,{total:b.value,getData:f,currentPage:p.value,currentPageSize:i.value,onChange:h},null,8,["total","currentPage","currentPageSize"])])}}},R=P(E,[["__scopeId","data-v-c14661eb"]]);export{R as default};
