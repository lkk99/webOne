import{P as U}from"./Pagination-7veeZ31U.js";import{K as D,_ as z,r,A,H as j,f as u,b as f,c as V,g as t,w as l,d as v,q as g,p as O,m as E,o as J,h as $,i as N,F as R,j as H,t as K}from"./index-CveQr6yx.js";const L=()=>D({url:"/menu/find",method:"get"}),T=()=>D({url:"/menu/findMenu",method:"get"}),G=s=>D({url:"/menu/add",method:"post",data:s}),Q=s=>D({url:"/menu/del",method:"post",data:s}),W=s=>(O("data-v-2b8a3393"),s=s(),E(),s),X=W(()=>v("span",{style:{"font-size":"18px"}},"新增",-1)),Y={__name:"addModal",props:{visible:{type:Boolean,default:!1},formData:{type:Object,required:!0}},emits:["close","save"],setup(s,{emit:x}){const h=x,_=s,y=r(null),p=r(!1),o=r({}),c=A({name:[{required:!0,message:"请输入",trigger:"blur"}],path:[{required:!0,message:"请输入",trigger:"blur"}],component:[{required:!0,message:"请输入",trigger:"blur"}]}),k=()=>{p.value=!1,o.value={},h("close")},M=async w=>{w&&await w.validate(async e=>{e&&(await G(o.value)).code==="0000"&&(p.value=!1,o.value={},h("save"))})};return j(()=>{p.value=_.visible,_.formData&&(o.value=_.formData)}),(w,e)=>{const b=u("el-input"),d=u("el-form-item"),C=u("el-radio"),S=u("el-radio-group"),a=u("el-form"),i=u("el-button"),P=u("el-dialog");return f(),V("div",null,[t(P,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=n=>p.value=n),onClosed:k,"close-on-click-modal":!1},{header:l(()=>[X]),footer:l(()=>[v("span",null,[t(i,{plain:"",class:"cancle-button",onClick:k},{default:l(()=>[g(" 取消 ")]),_:1}),t(i,{style:{color:"#fff",background:"#f70f7bc2",border:"none"},onClick:e[5]||(e[5]=n=>M(y.value))},{default:l(()=>[g(" 保存 ")]),_:1})])]),default:l(()=>[v("div",null,[t(a,{ref_key:"ruleFormRef",ref:y,model:o.value,"label-width":"120px","label-position":"right",rules:c},{default:l(()=>[t(d,{label:"名称",prop:"name"},{default:l(()=>[t(b,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.name=n),style:{width:"100%"},placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(d,{label:"url",prop:"path"},{default:l(()=>[t(b,{modelValue:o.value.path,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.path=n),modelModifiers:{trim:!0},style:{width:"100%"},placeholder:"请输入url"},null,8,["modelValue"])]),_:1}),t(d,{label:"路径",prop:"component"},{default:l(()=>[t(b,{modelValue:o.value.component,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.component=n),modelModifiers:{trim:!0},style:{width:"100%"},placeholder:"请输入路径"},null,8,["modelValue"])]),_:1}),t(d,{label:"类型",prop:"type"},{default:l(()=>[t(S,{modelValue:o.value.type,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.type=n)},{default:l(()=>[t(C,{value:"1"},{default:l(()=>[g("左侧菜单")]),_:1}),t(C,{value:"2"},{default:l(()=>[g("只做页面展示")]),_:1})]),_:1},8,["modelValue"]),v("span",{style:{color:"#f70f7bc2","margin-left":"20px",cursor:"pointer"},onClick:e[4]||(e[4]=n=>o.value.type="")}," 取消选中 ")]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])}}},Z=z(Y,[["__scopeId","data-v-2b8a3393"]]),ee={key:0},te=["onClick"],le=v("span",{style:{color:"#680ff7c2",cursor:"pointer"}},"删除",-1),oe={key:1},re={__name:"menu",setup(s){const x=r([{label:"名称",prop:"name",width:120},{label:"url",prop:"path",width:120},{label:"路径",prop:"component",width:120},{label:"类型",prop:"type",width:120},{label:"操作",prop:"opt",width:120}]),h=r([]),_=r(0),y=r(1),p=r(10),o=(a,i)=>{y.value=a,p.value=i},c=r(!1),k=()=>{c.value=!0},M=async a=>{(await Q({id:a.id})).code==="0000"&&d()},w=()=>{c.value=!1,d()},e=r({}),b=a=>{c.value=!0,e.value=JSON.parse(JSON.stringify(a))},d=async()=>{let a=await L();a.code==="0000"&&(h.value=a.data.menu,_.value=a.data.total)},C=r([]),S=async()=>{let a=await T();a.code==="0000"&&(C.value=a.data.menu)};return J(()=>{d(),S()}),(a,i)=>{const P=u("el-button"),n=u("el-popconfirm"),q=u("el-table-column"),B=u("el-table");return f(),V("div",null,[t(P,{style:{background:"#680ff7c2",color:"#fff",border:"none"},onClick:k},{default:l(()=>[g(" 新增 ")]),_:1}),t(B,{border:"",stripe:"","header-cell-style":{backgroundColor:"rgb(250, 250, 250)"},"cell-style":{height:"48px"},style:{height:"calc(100vh - 150px)"},data:h.value,"show-overflow-tooltip":""},{default:l(()=>[(f(!0),V(R,null,H(x.value,m=>(f(),$(q,{key:m.prop,"min-width":m.width,prop:m.prop,label:m.label,align:"center","show-overflow-tooltip":""},{default:l(({row:F})=>[m.prop==="opt"?(f(),V("div",ee,[v("span",{onClick:I=>b(F),style:{color:"#680ff7c2",cursor:"pointer"}}," 编辑 ",8,te),g("    "),t(n,{title:"确定删除?",onConfirm:I=>M(F)},{reference:l(()=>[le]),_:2},1032,["onConfirm"])])):m.prop==="type"?(f(),V("div",oe,[v("span",null,K(F.type=="1"?"左侧菜单(页面)":"页面"),1)])):N("",!0)]),_:2},1032,["min-width","prop","label"]))),128))]),_:1},8,["header-cell-style","data"]),t(U,{total:_.value,getData:d,currentPage:y.value,currentPageSize:p.value,onChange:o},null,8,["total","currentPage","currentPageSize"]),c.value?(f(),$(Z,{key:0,visible:c.value,formData:e.value,onClose:i[0]||(i[0]=m=>c.value=!1),onSave:w},null,8,["visible","formData"])):N("",!0)])}}};export{re as default};
