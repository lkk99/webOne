import{P as N}from"./Pagination-BcaZHcJo.js";import{a as z,g as B,e as F}from"./dict-BgOJfMDY.js";import{_ as I,r as u,A as U,H as q,f as d,b as r,c as i,g as a,w as n,d as P,q as V,p as j,m as A,e as O,o as E,I as G,J,h as M,i as K,F as R,j as Q,t as W}from"./index-C7dgg-A2.js";const X=v=>(j("data-v-1ae83c40"),v=v(),A(),v),Y=X(()=>P("span",{style:{"font-size":"18px"}},"新增",-1)),Z={style:{height:"calc(100vh - 320px)",overflow:"auto",width:"100%"}},ee={__name:"addDictModal",props:{visible:{type:Boolean,default:!1},formData:{type:Object,required:!0}},emits:["close","save"],setup(v,{emit:C}){const _=C,p=v,k=u(null),c=u(!1),e=u({}),x=U({type:[{required:!0,message:"请输入",trigger:"blur"}],name:[{required:!0,message:"请输入",trigger:"blur"}]}),D=()=>{c.value=!1,e.value={},_("close")},m=w=>{w&&w.validate(async l=>{l&&(await z({...e.value,status:e.value.status?"1":"0"})).code===200&&(c.value=!1,e.value={},_("save"))})};return q(()=>{c.value=p.visible,p.formData&&Object.keys(p.formData).length>0&&(e.value=p.formData)}),(w,l)=>{const g=d("el-input"),h=d("el-form-item"),S=d("el-switch"),y=d("el-form"),t=d("el-button"),f=d("el-dialog");return r(),i("div",null,[a(f,{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=s=>c.value=s),onClosed:D,top:"4%",width:"60%","close-on-click-modal":!1},{header:n(()=>[Y]),footer:n(()=>[P("span",null,[a(t,{plain:"",class:"cancle-button",onClick:D},{default:n(()=>[V(" 取消 ")]),_:1}),a(t,{style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:l[4]||(l[4]=s=>m(k.value))},{default:n(()=>[V(" 保存 ")]),_:1})])]),default:n(()=>[P("div",Z,[a(y,{ref_key:"ruleFormRef",ref:k,model:e.value,"label-width":"80px","label-position":"right",rules:x,style:{width:"95%"}},{default:n(()=>[a(h,{label:"类型",prop:"type"},{default:n(()=>[a(g,{modelValue:e.value.type,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.type=s),style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(h,{label:"名称",prop:"name"},{default:n(()=>[a(g,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.name=s),style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(h,{label:"状态",prop:"status"},{default:n(()=>[a(S,{modelValue:e.value.status,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.status=s)},null,8,["modelValue"])]),_:1}),a(h,{label:"备注",prop:"remark"},{default:n(()=>[a(g,{modelValue:e.value.remark,"onUpdate:modelValue":l[3]||(l[3]=s=>e.value.remark=s),type:"textarea",rows:4,style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])}}},te=I(ee,[["__scopeId","data-v-1ae83c40"]]),le={key:0},ae=["innerHTML","onClick"],oe=["innerHTML","onClick"],ne=["innerHTML"],ce={__name:"index",setup(v){const C=O(),_=u(!0),p=u([]),k=u(0),c=u(1),e=u(50),x=(t,f)=>{c.value=t,e.value=f},D=u([{label:"类型",prop:"type",width:120,customRender:t=>"<span style='color:#680ff7c2'>"+t.type+"</span>"},{label:"名称",prop:"name",width:150},{label:"状态",prop:"status",width:150,tooltip:!0,customRender:t=>t.status==1?"<span style='color:green'>启用</span>":"<span style='color:gray'>禁用</span>"},{label:"备注",prop:"remark",width:120,tooltip:!0},{label:"创建人",prop:"createName",width:120,tooltip:!0},{label:"创建时间",prop:"createTime",width:180,tooltip:!0}]),m=u(!1),w=u({}),l=()=>{m.value=!0},g=t=>{C.push("/dictdetail?type="+t.type)},h=()=>{m.value=!1,y()},S=async t=>{(await F(t)).code===200&&y()},y=async()=>{_.value=!0;let t=await B({pageNum:c.value,pageSize:e.value});t.code==200&&(p.value=t.data,k.value=t.total),_.value=!1};return E(()=>{y()}),(t,f)=>{const s=d("el-button"),T=d("el-table-column"),H=d("el-table"),L=G("loading");return r(),i("div",null,[a(s,{style:{background:"#680ff7c2",color:"#fff",border:"none"},onClick:l},{default:n(()=>[V(" 新增 ")]),_:1}),J((r(),M(H,{border:"",stripe:"","header-cell-style":{backgroundColor:"rgb(250, 250, 250)"},"cell-style":{height:"48px"},style:{height:"calc(100vh - 160px)","margin-top":"10px"},data:p.value},{default:n(()=>[(r(!0),i(R,null,Q(D.value,o=>(r(),M(T,{key:o.prop,"min-width":o.width,prop:o.prop,label:o.label,align:"center","show-overflow-tooltip":o.tooltip},{default:n(({row:b})=>[o.customRender?(r(),i("div",le,[o.prop=="type"?(r(),i("span",{key:0,innerHTML:o.customRender(b),style:{cursor:"pointer"},onClick:$=>g(b)},null,8,ae)):o.prop=="status"?(r(),i("span",{key:1,innerHTML:o.customRender(b),style:{cursor:"pointer"},onClick:$=>S(b)},null,8,oe)):(r(),i("span",{key:2,innerHTML:o.customRender(b)},null,8,ne))])):(r(),i(R,{key:1},[V(W(b[o.prop]),1)],64))]),_:2},1032,["min-width","prop","label","show-overflow-tooltip"]))),128))]),_:1},8,["header-cell-style","data"])),[[L,_.value]]),a(N,{total:k.value,getData:y,currentPage:c.value,currentPageSize:e.value,onChange:x},null,8,["total","currentPage","currentPageSize"]),m.value?(r(),M(te,{key:0,visible:m.value,formData:w.value,onClose:f[0]||(f[0]=o=>m.value=!1),onSave:h},null,8,["visible","formData"])):K("",!0)])}}};export{ce as default};
