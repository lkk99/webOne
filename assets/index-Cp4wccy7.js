import{_ as x,b as C,L as T,r as p,A as w,o as B,c as r,d as D,e as I,g as l,w as a,f as i,t as q,q as _}from"./index-AHIc1CTL.js";import{j as b,k as V}from"./book-eGR176Nv.js";const L={class:"cont"},M=["innerHTML"],H=["innerHTML"],R={class:"buttn"},N={__name:"index",setup(F){C();const s=T(),d=p(null);p(!1);const e=p({}),v=w({title:[{required:!0,message:"请输入",trigger:"blur"}]}),m=()=>{history.go(-1)},g=o=>{let t=document.getElementById("editableDivs").innerText;o&&o.validate(async n=>{n&&t&&(await b({bookId:s.query.id,...e.value,content:t,release:1})).code===200&&(e.value={},history.go(-1))})},y=o=>{let t=document.getElementById("editableDivs").innerText;o&&o.validate(async n=>{n&&t&&(await b({bookId:s.query.id,...e.value,content:t,release:0})).code===200&&(e.value={},history.go(-1))})},h=async()=>{let o=await V({id:s.query.directId,bookId:s.query.id});o.code===200&&(e.value=o.data,e.value.content=o.data.content.replace(/\n/g,"<br>"),e.value.publishContent=o.data.publishContent.replace(/\n/g,"<br>"))};return B(()=>{h()}),(o,t)=>{const n=r("el-form-item"),u=r("el-input"),k=r("el-form"),c=r("el-button");return D(),I("div",L,[l(k,{ref_key:"ruleFormRef",ref:d,model:e.value,"label-width":"120px","label-position":"right",rules:v,style:{"margin-top":"20px",width:"90%"}},{default:a(()=>[l(n,{label:"发布的目录名称",prop:"publishTitle"},{default:a(()=>[i("div",null,q(e.value.publishTitle),1)]),_:1}),l(n,{label:"发布的内容",prop:"publishContent"},{default:a(()=>[i("div",{class:"condiv",innerHTML:e.value.publishContent},null,8,M)]),_:1}),l(n,{label:"目录名称",prop:"title"},{default:a(()=>[l(u,{modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=f=>e.value.title=f),style:{width:"100%"},placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(n,{label:"内容",prop:"content"},{default:a(()=>[i("div",{contenteditable:"true",id:"editableDivs",class:"condiv",innerHTML:e.value.content},null,8,H)]),_:1})]),_:1},8,["model","rules"]),i("span",R,[l(c,{plain:"",style:{color:"#680ff7c2",background:"#fff",border:"1px solid #680ff7c2"},onClick:m},{default:a(()=>[_(" 返回 ")]),_:1}),l(c,{style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:t[1]||(t[1]=f=>g(d.value))},{default:a(()=>[_(" 发布 ")]),_:1}),l(c,{style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:t[2]||(t[2]=f=>y(d.value))},{default:a(()=>[_(" 保存 ")]),_:1})])])}}},A=x(N,[["__scopeId","data-v-5334731b"]]);export{A as default};
