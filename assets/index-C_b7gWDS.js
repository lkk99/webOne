import{P as B}from"./Pagination-2e6eM9VM.js";import{a as F,g as H,e as I}from"./dict-Cj-hV14E.js";import{_ as L,r,A as U,H as q,c as d,d as u,e as f,g as a,w as o,f as R,q as V,p as j,m as A,b as O,o as E,I as G,J,h as P,i as K,F as M,j as Q,t as W}from"./index-AHIc1CTL.js";const X=v=>(j("data-v-1ae83c40"),v=v(),A(),v),Y=X(()=>R("span",{style:{"font-size":"18px"}},"新增",-1)),Z={style:{height:"calc(100vh - 320px)",overflow:"auto",width:"100%"}},ee={__name:"addDictModal",props:{visible:{type:Boolean,default:!1},formData:{type:Object,required:!0}},emits:["close","save"],setup(v,{emit:C}){const _=C,i=v,y=r(null),c=r(!1),e=r({}),x=U({type:[{required:!0,message:"请输入",trigger:"blur"}],name:[{required:!0,message:"请输入",trigger:"blur"}]}),D=()=>{c.value=!1,e.value={},_("close")},p=w=>{w&&w.validate(async l=>{l&&(await F({...e.value,status:e.value.status?"1":"0"})).code===200&&(c.value=!1,e.value={},_("save"))})};return q(()=>{c.value=i.visible,i.formData&&Object.keys(i.formData).length>0&&(e.value=i.formData)}),(w,l)=>{const g=d("el-input"),b=d("el-form-item"),S=d("el-switch"),h=d("el-form"),t=d("el-button"),m=d("el-dialog");return u(),f("div",null,[a(m,{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=n=>c.value=n),onClosed:D,top:"4%",width:"60%","close-on-click-modal":!1},{header:o(()=>[Y]),footer:o(()=>[R("span",null,[a(t,{plain:"",class:"cancle-button",onClick:D},{default:o(()=>[V(" 取消 ")]),_:1}),a(t,{style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:l[4]||(l[4]=n=>p(y.value))},{default:o(()=>[V(" 保存 ")]),_:1})])]),default:o(()=>[R("div",Z,[a(h,{ref_key:"ruleFormRef",ref:y,model:e.value,"label-width":"80px","label-position":"right",rules:x,style:{width:"95%"}},{default:o(()=>[a(b,{label:"类型",prop:"type"},{default:o(()=>[a(g,{modelValue:e.value.type,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value.type=n),style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(b,{label:"名称",prop:"name"},{default:o(()=>[a(g,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=n=>e.value.name=n),style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(b,{label:"状态",prop:"status"},{default:o(()=>[a(S,{modelValue:e.value.status,"onUpdate:modelValue":l[2]||(l[2]=n=>e.value.status=n)},null,8,["modelValue"])]),_:1}),a(b,{label:"备注",prop:"remark"},{default:o(()=>[a(g,{modelValue:e.value.remark,"onUpdate:modelValue":l[3]||(l[3]=n=>e.value.remark=n),type:"textarea",rows:4,style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])}}},te=L(ee,[["__scopeId","data-v-1ae83c40"]]),le={key:0},ae=["innerHTML","onClick"],oe=["innerHTML","onClick"],ue={__name:"index",setup(v){const C=O(),_=r(!0),i=r([]),y=r(0),c=r(1),e=r(50),x=(t,m)=>{c.value=t,e.value=m},D=r([{label:"类型",prop:"type",width:120,customRender:t=>"<span style='color:#680ff7c2'>"+t.type+"</span>"},{label:"名称",prop:"name",width:150},{label:"状态",prop:"status",width:150,tooltip:!0,customRender:t=>t.status==1?"<span style='color:green'>启用</span>":"<span style='color:gray'>禁用</span>"},{label:"备注",prop:"remark",width:120,tooltip:!0},{label:"创建人",prop:"createName",width:120,tooltip:!0},{label:"创建时间",prop:"createTime",width:180,tooltip:!0}]),p=r(!1),w=r({}),l=()=>{p.value=!0},g=t=>{C.push("/dictdetail?type="+t.type)},b=()=>{p.value=!1,h()},S=async t=>{(await I(t)).code===200&&h()},h=async()=>{_.value=!0;let t=await H({pageNum:c.value,pageSize:e.value});t.code==200&&(i.value=t.data,y.value=t.total),_.value=!1};return E(()=>{h()}),(t,m)=>{const n=d("el-button"),T=d("el-table-column"),$=d("el-table"),N=G("loading");return u(),f("div",null,[a(n,{style:{background:"#680ff7c2",color:"#fff",border:"none"},onClick:l},{default:o(()=>[V(" 新增 ")]),_:1}),J((u(),P($,{border:"",stripe:"","header-cell-style":{backgroundColor:"rgb(250, 250, 250)"},"cell-style":{height:"48px"},style:{height:"calc(100vh - 160px)","margin-top":"10px"},data:i.value},{default:o(()=>[(u(!0),f(M,null,Q(D.value,s=>(u(),P(T,{key:s.prop,"min-width":s.width,prop:s.prop,label:s.label,align:"center","show-overflow-tooltip":s.tooltip},{default:o(({row:k})=>[s.customRender?(u(),f("div",le,[s.prop=="type"?(u(),f("span",{key:0,innerHTML:s.customRender(k),style:{cursor:"pointer"},onClick:z=>g(k)},null,8,ae)):(u(),f("span",{key:1,innerHTML:s.customRender(k),onClick:z=>S(k)},null,8,oe))])):(u(),f(M,{key:1},[V(W(k[s.prop]),1)],64))]),_:2},1032,["min-width","prop","label","show-overflow-tooltip"]))),128))]),_:1},8,["header-cell-style","data"])),[[N,_.value]]),a(B,{total:y.value,getData:h,currentPage:c.value,currentPageSize:e.value,onChange:x},null,8,["total","currentPage","currentPageSize"]),p.value?(u(),P(te,{key:0,visible:p.value,formData:w.value,onClose:m[0]||(m[0]=s=>p.value=!1),onSave:b},null,8,["visible","formData"])):K("",!0)])}}};export{ue as default};
