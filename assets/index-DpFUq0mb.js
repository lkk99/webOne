import{_ as I,L as S,e as D,r as d,o as N,H as z,f as V,b as s,c as u,d as r,F as E,j as F,g as _,w as i,l as b,h as k,i as y,q as a,t as f,v as L,p as P,m as R}from"./index-CveQr6yx.js";import{s as j,f as H}from"./book-CpxFzjtq.js";const M=c=>(P("data-v-fa739c2b"),c=c(),R(),c),T={class:"bookkuang"},$=M(()=>r("h2",{style:{"text-align":"center"}},"目录",-1)),A={class:"dirct"},G=["onClick"],J={class:"buttn"},K={__name:"index",setup(c){const e=S(),l=D(),p=d([]);d(0);const h=d(1),g=d(50),m=()=>{l.push("/read/newcontent?id="+e.query.id)},v=t=>{l.push("/read/editcontent?id="+e.query.id+"&directId="+t.id)},x=()=>{l.push("/read/editbook?id="+e.query.id)},C=()=>{history.go(-1)},q=async()=>{(await j({bookId:e.query.id,release:1})).code===200&&history.go(-1)},w=async()=>{let t=await H({pageNum:h.value,pageSize:g.value,id:e.query.id});t.code===200&&(p.value=t.data)};return N(()=>{}),z(()=>{e.path.includes("read/directory")&&w()}),(t,O)=>{const n=V("el-button");return s(),u("div",null,[r("div",T,[$,r("div",A,[(s(!0),u(E,null,F(p.value,(o,B)=>(s(),u("div",{key:o,onClick:Q=>v(o),style:{"border-bottom":"1px solid #eee",padding:"5px 15px"}},[a(f(B+1)+"、"+f(o.title)+" ",1),r("span",{class:L([o.release=="1"?"fb":"dfb"]),style:{"font-size":"14px",float:"right"}},f(o.release=="1"?"已发布":"待发布")+"   ",3)],8,G))),128))]),r("span",J,[_(n,{plain:"",style:{color:"#680ff7c2",background:"#fff",border:"1px solid #680ff7c2"},onClick:C},{default:i(()=>[a(" 返回 ")]),_:1}),b(e).query.release==0?(s(),k(n,{key:0,style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:x},{default:i(()=>[a(" 编辑本书 ")]),_:1})):y("",!0),b(e).query.release==0?(s(),k(n,{key:1,style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:q},{default:i(()=>[a(" 发布 ")]),_:1})):y("",!0),_(n,{style:{color:"#fff",background:"#680ff7c2",border:"none"},onClick:m},{default:i(()=>[a(" 新增目录 ")]),_:1})])])])}}},X=I(K,[["__scopeId","data-v-fa739c2b"]]);export{X as default};
